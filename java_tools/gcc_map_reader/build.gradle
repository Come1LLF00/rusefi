plugins {
    id 'java'
    id 'application'
}

defaultTasks 'jar'

dependencies {
    compileClasspath fileTree( dir: 'lib', includes: [ 'junit.jar', 'annotations.jar' ] )
}

/*
  The deprecated now building by Ant script put the
  generated classes into folder 'build/classes/<package-name>'.
  But Gradle by default put the generated classes to
  'build/classes/main/java'.
  So, these lines are required to keep the old file structure for
  generated binaries.
*/
sourceSets {
    main {
        java.outputDir = file( 'build/classes' )
    }
}

jar {
    destinationDirectory = file( '$rootDir/../..' )
    manifest {
        attributes(
            'Main-Class': 'rusefi.GccMapReader'
        )
    }
}

run {
    classpath = files( '$rootDir/../../../java_console_binary/rusefi_console.jar' )
}